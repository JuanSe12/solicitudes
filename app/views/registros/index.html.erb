
<h1>Lista de usuarios</h1>

<table class="table table-bordered table-striped table-condensed table-hover smart-form has-tickbox">
  <thead>
    <tr>
      <th>Email</th>
      <th colspan="2">Opciones</th>
    </tr>
  </thead>

  <tbody>
    <% @registros.each do |registro| %>
      <tr>
        <td><%= registro.email %></td>
        <td><button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#editar_<%= registro.id %>">
          Edit
        </button></td>
        <td>
    <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#eliminar<%= registro.id%>">
        Eliminar
      </button></td>
        <div class="modal fade" id="eliminar<%= registro.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel"><strong>Eliminar usuario</strong></h4>
        </div>
        <div class="modal-body">
        <h4>Eliminar el usuario  <i><%= registro.email %></i>, estas seguro?</h4>  
        <div class="modal-footer">
          <%= button_to 'Eliminar', registro, method: :delete, class: "btn btn-danger btn-sm" %>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div class="modal fade" id="editar_<%= registro.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel"><strong>Editar usuario</strong></h4>
        </div>
        <div class="modal-body">
          <%= form_for(registro, :method => :put, remote: true) do |f| %>

          <div class="field">
            <%= f.label :email %><br>
            <%= f.text_field :email, class: "form-control email"  %>
          </div>
        
        <div class="modal-footer">
           <%= submit_tag "Editar", class: "btn btn-primary" %>
        <% end %>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
        </div>
      </div>
    </div>
  </div>
  </div>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#nuevo">
        Nuevo usuario
      </button>
<div class="modal fade" id="nuevo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel"><strong>Crear usuario</strong></h4>
        </div>
        <div class="modal-body">
        <%= form_for(@registro, remote: true) do |f| %>

          <div class="field">
            <%= f.label :email %><br>
            <%= f.text_field :email, class: "form-control email"  %>
          </div>
        
        <div class="modal-footer">
           <%= submit_tag "Crear", class: "btn btn-primary" %>
        <% end %>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
        </div>
      </div>
    </div>
  </div>
  </div>
